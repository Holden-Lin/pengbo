---
layout: post
title:  "Layer2 - 种一颗Plasma树"
date:   2023-05-15 16:43:15 +0800
categories: blockchain
---

在我们探索Layer2时，我们无法忽视两位关键人物，比特币闪电网络的创始人Joseph Poon和Thaddeus Dryja，以及以太坊的Raiden网络的开发者Heiko Hees。

他们所引领的状态通道(state channel)技术，使得交易可以在不涉及主区块链的情况下进行。只有在交易全部结束时，他们才将最终结果提交到主链进行安全验证。这种创新降低了交易费用，减轻了主链的负担，并维护了安全性。

然而，他们的技术也并非完美无缺。状态通道的用户必须在同一通道内进行交易，交易前需要存入大量的保证金，而且在交易结束后才能将交易状态同步到主链，这个过程可能会非常长，从而可能带来安全风险。

## Plasma出世

与此同时，另一种L2技术plasma问世，它在2007年由Joseph Poon和Vitalik Buterin提出。Plasma的核心概念是创建多个子链（也称为Plasma链），子链是从以太坊主链分出的类树状结构，实现交易的并行处理。

子链模式是把双刃剑，解决状态通道的不少缺点之余，又带来了新缺点。

## 灵活子链

连接到根链的树状子链，有两大优势。一是每个子链可以有自己的共识机制和代币 - 这意味着子链可以做高度定制化，以实现复杂的智能合约调用和高频交易。

二是子链定期（一般为15分钟）更新状态到主链，这使得plasma用户不需要预存一大笔押金，同时让子链更加安全。

## 死板子链

鱼和熊掌不可兼得，一个优点常带来一个缺点。Plasma支持复杂智能合约这一定制化特性，使得不同子链之间差别很大，子链彼此交易或转移资产花费更多成本，在纯交易领域有时并不如State channel方便。

在Plasma的提现过程包括提交取款请求以及Plasma链上资产所有权证明。之后会有一个挑战期，如果取款请求是欺诈性的，其他人可以对其提出异议。

## 数据可用性

数据可用性(data availability)是状态通道和Plasma共有的问题。它指的是网络中所有参与者能够访问和验证所需数据的能力，以确保交易的正确性和安全性。

Plasma：虽然Plasma链定期将其状态（Merkle根）提交到主链，但实际的交易数据是保存在链下的。用户可能在独立访问完整的交易历史或验证Plasma链状态方面面临挑战。这个问题使得更难以检测欺诈或无效的状态转换，可能会损害安全性并限制解决方案的通用性。

状态通道：在状态通道中，交易直接在参与方之间交换，并不广播到整个网络。只有在通道关闭时，才将通道的最终状态提交到主链。这种链下的方法意味着通道内的交易数据不是公开可用的，使得其他网络参与者难以验证通道状态的正确性。此外，如果一个参与方变得不合作或不响应，通道的可用性和安全性可能会受到影响。

作为Layer 2解决方案的Plasma和状态通道都面临着数据可用性的挑战，这使它们在作为通用的Layer 2解决方案时不太适用。而在这个问题面前，Rollups的设计者提出了更好的解决方案我们将在后面的文章中详细介绍。