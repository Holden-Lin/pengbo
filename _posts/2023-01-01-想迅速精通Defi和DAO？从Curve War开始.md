---
layout: post
title:  "想迅速精通Defi和DAO？从Curve War开始"
date:   2023-1-1 09:43:15 +0800
categories: blockchain
---

# 想迅速精通Defi和DAO？从Curve War开始

“2021年是Defi年。”区块链社区兴奋地定义。而今年全球资本市场价格下跌，Defi一地鸡毛，冷静后社区又认识到，“Defi不过如此。”

Defi是decentralized finance的简称，只要在公链上运行的金融项目，都归到Defi这一范畴。其实，很多项目只不过是披着去中心化的皮，行传统金融之事，吃相却更难看。

Defi项目如浩瀚星辰，熊市洗礼后，你会发现值得关注的并不多。里面最亮的一颗星，就是Curve，它是[稳定币](稳定币并不稳定)交易的去中心化协议。

比起像Uniswap这个Defi始祖，Curve只瞄准稳定币这一细分市场，也恰因它的这个定位，造就了它在加密世界举足轻重的地位。本系列第一个Defi项目选择介绍Curve而非始祖Uniswap，主要原因是争夺Curve治理权的战火燎原，了解Curve war的前世今生能直接俯瞰整个Defi生态的玩法。

## AMM让人人可成为做市商

Curve是去中心化的稳定币交易协议和平台。和传统交易所不同，它的代码和治理都是公开的，在[智能合约](pengbo.club/blockchain/关于以太坊-你所要知道的)运行。此外它只做[稳定币](pengbo.club/稳定币并不稳定)交易。

Curve的一大特色是采用AMM做市机制。AMM由Uniswap发明，全称automatic market making（自动做市）。与传统金融基于订单簿和一众大型做市商不同，交易的深度和流动性来自所有用户的共同参与，是去中心化精神的经典体现。

![orderbook_binance](/assets/images/orderbook_binance.png)


假设Curve上支持USDT和USDC两种稳定币的兑换。那么Curve的用户，会把手里的两种货币预先存进协议里作为交易的流动性。用户存入的动机，是获得协议给予的奖励，奖励的来源是Curve上兑换收取的交易费用。

这里假设我存入了1000USDT，隔壁老王存入了1000USDC，从而池子里有了1：1的两种稳定币，和他们的市价比率相同（1USDT=1USDC)。

接着，你拿着100USDT来到Curve，说要兑换USDC。那么Curve就会把池子里老王存入的USDC给你，并从你手中收到USDT，最后完成兑换。假设兑换手续费1美金，那么老王就会从中50%收益，即0.5刀（剩下的50%给谁？后文谈）。

这时，池子里有了1100USDT和900USDC，接下来的兑换就无法维持1:1的市价，因为这样的话很可能USDC就会不足，此时汇率变为 1 USDT = 9/11 USDC。可见，协议会根据流动性池子的比例，调整兑换比率，并收取更贵的手续费。

这时，Curve会将收到的更贵的手续费，用于奖励提供USDC流动性的用户，从而让更多的用户愿意存入USDC，最终能根据市价维持流动性池子的市价比例。这个时候，存入USDC的奖励又降了下来，和USDT相同。

![curve_pool](/assets/images/curve_pool.png)

这一由用户参与提供流动性的交易过程，就叫做AMM。存入USDC和USDT的人，我们叫做liquidity provider，简称LP。提供流动性称为LP获取收益的过程，又被叫做liquidity farming，流动性挖矿。以后看到社区在聊挖什么池子年化百分之多少，你就知道怎么回事了。

## DAO作为链上公司

AMM的设计非常美妙，通过自激励的方式，形成一套正向循环的做市机制。

然而实际情况更复杂。Curve在给予LP手续费分成的同时，还会发放协议的原生代币CRV额外激励。CRV可以理解为Curve这家去中心化公司发行的股票。

换句话说，协议希望尽可能用CRV来代替直接的手续费奖励，因为手续费是从交易的用户侧收的，如果手续费降低，那么交易的滑点更低、价格更吸引，进而提高交易量。

不过，对于大部分LP而言，拿到CRV后大多都去交易所卖掉，兑现收益。这就给CRV带来巨大抛压，让币价下跌，最后让廉价的CRV激励变得鸡肋。

对此，Curve想出一计。他们先成立了Curve DAO。DAO是decentralized autonomous organization，即去中心化自治组织，一个酷炫词汇，其实就是线上社区，通常通过投票对协议行使治理权。

接着，Curve宣布如果LP在协议里锁定CRV不提走（时间可长达4年），就能获得veCRV代币作为激励，锁定时间越长，就能获得越多veCRV。而拥有越多veCRV，就有更高的Curve DAO投票权 - 这就让CRV有了意义。

![veCRV](/assets/images/veCRV.png)

为什么投票权这么重要？一是veCRV持有者能分享另50%的交易手续费，更重要的是，Curve DAO有了一个定期会议，用以重新投票决定每个稳定币池的收益率，而持有veCRV越多，投票权越大。

也就是说作为LP，其收益率不仅由AMM机制下的行情决定，这个会议还会额外调整利益分配，类似国家政府统一收税以后再给地方分配的意思。这就导致了Curve war，大家纷纷争夺veCRV获取投票权，以影响收益率。

## Curve war - Defi DAO的治理之战

DAO的收益率治理机制之下，大LP必然会争取更多利益分配。Curve war是指LP（尤其是指算法稳定币的发行方）为提高其在Curve的流动性池子的收益率和活跃度，而抢夺veCRV治理代币的行为。

算法稳定币之前在[本系列](pengbo.club/blockchain/稳定币并不稳定)探讨过。一个去中心化的稳定币要推广，必然绕不开作为专注于稳定币交易的Curve，因为核心的流动性只能在Curve快速获取，用户交易临头再去各算稳的协议里mint，就来不及了。

而要想Curve里有足够的流动性，必然要提高自己算稳LP的收益率，收益不高就没人去做LP，池子就会枯竭。推演到这里，我们发现算稳要推广，就要提高Curve LP的收益率。

而提高收益率的方法，就是在DAO的定期再分配会议里，有足够的发言权，这就使得各算稳协议对veCRV的争夺。

这场争夺战的最大赢家就是convex finance，它胜利的策略非常有趣，就是在整个CRV治理机制之上，再套一层娃。

Convex宣布，如果用户在协议中其持有的CRV并出让veCRV投票权，他们将获得CVX（convex协议发行的代币）作为激励，同时还将获得veCVX治理代币，拥有convex的投票权。

![convex](/assets/images/convex.png)

对Curve用户而言，他们将持有的CRV通过convex协议锁定，能获得convex的LP收益+CVX代币激励，这是一笔比在Curve上作LP更划算的交易:用户不用锁定几年的CRV而丧失流动性，而是马上就能获得可变现的CVX。

于是瞬间CVX就获得了大多数CRV，成为Curve上最大的LP。而通过veCVX行使convex的投票权，就能间接地决定Curve上池子收益，于是Curve war战团们从争夺CRV，转向争夺CVX，游戏继续。

## DAO真的Decentralized吗

通过了解Curve，我们能知道AMM作为Defi最常见的一种做市机制，从而知道LP作为普通用户最常见的Defi玩法，而通过Curve War，又知道了DAO的治理前沿，一举多得。

在这场CRV争夺战背后，可以看到虽然这是一场“去中心化”的、基于所谓DAO（去中心化自治组织）的战争，但背后中心化的力量作用甚大，比如Convex实际上是由Curve创始人发起的一个新协议（也因为如此才能瞬间获得社区的大力支持，以及将Curve上的治理套娃玩得炉火纯青）。

在[区块链 = 去中心化？](pengbo.club/blockchain/区块链 = 去中心化?)中和大家分享过，即使在最去中心化的项目比特币中，也存在众多中心化的因素。而所谓的DAO作为去中心化的组织，也免不了中心化的存在。

民主并不等于去中心化，民主背后的中心化力量也是非常强大的。美国作为最民主的国家，其政府一样可以强大到把总统谋杀而逍遥法外，详见纪录片[刺杀肯尼迪](movie.douban.com/subject/1292230/)。这在Curve war中也很明显，虽然大家投票决定LP池收益，但最终还是沦为屈指可数的核心协议之间的战争。

区块链还属早期，区块链的真正核心精神是什么，Web3.0的核心又是什么，值得大家思考。







